webpackJsonp([9],{C0Vn:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("woOf"),c=e.n(a),l={inject:["reload"],data:function(){return{mgeActVis:!1,edit:!1,bigImg:{isShow:!1,img:""},activity:""}},mounted:function(){this.getActivityList()},methods:{handleClick:function(t){console.log(t)},showBigImg:function(t){this.bigImg.img=t,this.bigImg.isShow=!this.bigImg.isShow},getActivityList:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.actGroup.pageNum;this.$route.query.gid?this.$api.getGroupAct({id:this.$route.query.gid,page:{pageNum:i,pageSize:8,showAll:!0}}).then(function(e){t.$store.dispatch("pushActivity",{name:"activity",num:i,data:e.data})}):this.$route.query.uid?this.$api.getUserAct({id:this.$route.query.uid,page:{pageNum:i,pageSize:8,showAll:!0}}).then(function(e){t.$store.dispatch("pushActivity",{name:"activity",num:i,data:e.data})}):this.$api.getAllActivity({pageNum:i,pageSize:8,showAll:!0}).then(function(e){t.$store.dispatch("pushActivity",{name:"activity",num:i,data:e.data})})},manageActivity:function(t,i){var e=this;this.mgeActVis=!0,t?(e.activity=c()({},i),e.edit=!0):(e.activity=c()({},e.$store.getters.getActivityPrototype),e.edit=!1)},deleteActivity:function(){var t=this;this.$confirm("确定真的要删除该活动吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.delActivity(t.activity.activityId).then(function(i){var e=i.success;i.errCode,i.errMsg;e?(t.$message({type:"success",message:"删除成功!"}),t.reload()):t.$message({type:"error",message:"删除失败，请重试!"})}).catch(function(i){console.log(i),t.$message({type:"error",message:"无法连接到服务器!"})})}).catch(function(){})}}},s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"block"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.$store.getters.getActivityList}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{prop:"activityId",label:"ID",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{prop:"activityImg",label:"活动图片",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"demo-image"},[e("div",{staticClass:"block"},[e("el-image",{staticStyle:{width:"5vh",height:"5vh",cursor:"pointer"},attrs:{src:i.row.activityImg,alt:""},on:{click:function(e){return t.showBigImg(i.row.activityImg)},mousedown:function(t){t.preventDefault()}}})],1)])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"activityName",label:"名称",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"activityInformation",label:"介绍",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"activityStart",label:"开始时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"activityEnd",label:"结束时间"}}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleClick(i.row)}}},[t._v("查看")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.manageActivity(!0,i.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),e("div",{staticStyle:{position:"absolute",bottom:"20px",left:"45%"}},[e("el-pagination",{attrs:{"hide-on-single-page":!0,layout:"prev, pager, next","current-page":Number(t.$store.state.activity.pageNum),total:this.$store.state.activity.data.total},on:{"current-change":t.getActivityList}})],1),t._v(" "),e("el-dialog",{attrs:{visible:t.bigImg.isShow,width:"30%",center:""},on:{"update:visible":function(i){return t.$set(t.bigImg,"isShow",i)}}},[e("img",{attrs:{src:t.bigImg.img,alt:"",width:"100%",height:"100%"}})]),t._v(" "),e("el-dialog",{attrs:{title:"活动编辑",visible:t.mgeActVis,top:"5vh"},on:{"update:visible":function(i){t.mgeActVis=i}}},[e("el-form",{attrs:{model:t.activity,"label-width":"85px"}},[e("el-form-item",{attrs:{label:"活动名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.activity.activityName,callback:function(i){t.$set(t.activity,"activityName",i)},expression:"activity.activityName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"活动介绍"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.activity.activityInformation,callback:function(i){t.$set(t.activity,"activityInformation",i)},expression:"activity.activityInformation"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"最大人数"}},[e("el-input-number",{attrs:{size:"small"},model:{value:t.activity.activityPersonNum,callback:function(i){t.$set(t.activity,"activityPersonNum",i)},expression:"activity.activityPersonNum"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"开始时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy/MM/dd HH:mm:ss"},model:{value:t.activity.activityStart,callback:function(i){t.$set(t.activity,"activityStart",i)},expression:"activity.activityStart"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"结束时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy/MM/dd HH:mm:ss"},model:{value:t.activity.activityEnd,callback:function(i){t.$set(t.activity,"activityEnd",i)},expression:"activity.activityEnd"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"报名时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy/MM/dd HH:mm:ss"},model:{value:t.activity.activitySignUp,callback:function(i){t.$set(t.activity,"activitySignUp",i)},expression:"activity.activitySignUp"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否显示"}},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.activity.activityShow,callback:function(i){t.$set(t.activity,"activityShow",i)},expression:"activity.activityShow"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.submit("activity")}}},[t._v("提交")]),t._v(" "),e("el-button",{on:{click:function(i){t.mgeActVis=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],attrs:{type:"danger"},on:{click:t.deleteActivity}},[t._v("删除活动")])],1)],1)],1)},staticRenderFns:[]},o=e("VU/8")(l,s,!1,null,null,null);i.default=o.exports}});
//# sourceMappingURL=9.d064f6ce051a083786c0.js.map